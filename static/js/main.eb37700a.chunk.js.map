{"version":3,"sources":["modules/core/redux/types.ts","modules/core/redux/constants.ts","modules/core/redux/actions.ts","modules/core/api.ts","modules/core/redux/saga.ts","modules/core/redux/selectors.ts","modules/core/redux/index.ts","modules/core/redux/reducer.ts","store/reducers.ts","store/sagas.ts","store/index.ts","modules/core/components/Layout.tsx","modules/core/components/Link.tsx","modules/core/components/AppBar.tsx","modules/core/components/Spinner.tsx","modules/core/components/Form.tsx","modules/core/components/PrivateRoute.tsx","modules/registration/components/RegistrationForm.tsx","modules/login/components/LoginForm.tsx","modules/profile/components/Profile.tsx","App.tsx","index.tsx"],"names":["ADD_USER","ADD_USER_SUCCESS","ADD_USER_FAILURE","SIGN_IN_USER","SIGN_IN_USER_SUCCESS","SIGN_IN_USER_FAILURE","SIGN_OUT_USER","DELETE_USER","UPDATE_USER","initialState","user","isAuthorized","addUserSuccess","type","payload","signInUserSuccess","signInUserFailure","error","getUsers","usersStringified","localStorage","getItem","JSON","parse","setUsers","users","setItem","stringify","createUser","find","username","Error","password","md5","omit","loginUser","userInDb","removeUser","userIndex","findIndex","slice","changeUser","description","addUser","signInUser","deleteUser","updateUser","watchCreate","watchLogin","watchDelete","watchUpdate","userSaga","action","call","put","push","message","takeEvery","i","take","delay","all","getStateSlice","get","getIsAuthorized","flow","getUser","getError","userReducer","state","history","combineReducers","router","connectRouter","rootSaga","createHashHistory","sagaMiddleware","createSagaMiddleware","useStyles","makeStyles","createStyles","container","flexGrow","overflow","Layout","children","classes","CssBaseline","className","Container","maxWidth","Link","to","component","RouterLink","theme","root","flexShrink","menuButton","marginRight","spacing","title","link","color","palette","background","default","AppTopBar","onLogout","AppBar","position","Toolbar","Typography","variant","Button","onClick","height","display","justifyContent","alignItems","paper","marginTop","flexDirection","avatar","margin","backgroundColor","secondary","light","form","width","submit","errorMessage","main","Form","buttonLabel","onSubmit","validationSchema","icon","formik","useFormik","initialValues","Avatar","noValidate","handleSubmit","TextField","required","fullWidth","id","name","label","errors","helperText","autoComplete","onChange","handleChange","value","values","autoFocus","PrivateRoute","rest","useSelector","render","useCallback","location","pathname","from","RegistrationSchema","Yup","shape","min","max","matches","RegistrationForm","dispatch","useDispatch","SignUpSchema","LoginForm","field","buttonContainer","Profile","useState","setDescription","e","preventDefault","handleChangeDesc","target","handleDelete","multiline","App","appName","handleLogout","path","store","middlewares","routerMiddleware","middlewareEnhancer","applyMiddleware","composedEnhancers","composeWithDevTools","rootReducer","creteRootReducer","createStore","run","saga","configureStore","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.eb37700a.chunk.js","sourcesContent":["export const ADD_USER = 'ADD_USER';\nexport const ADD_USER_SUCCESS = 'ADD_USER_SUCCESS';\nexport const ADD_USER_FAILURE = 'ADD_USER_FAILURE';\nexport const SIGN_IN_USER = 'SIGN_IN_USER';\nexport const SIGN_IN_USER_SUCCESS = 'SIGN_IN_USER_SUCCESS';\nexport const SIGN_IN_USER_FAILURE = 'SIGN_IN_USER_FAILURE';\nexport const SIGN_OUT_USER = 'SIGN_OUT_USER';\n\nexport const DELETE_USER = 'DELETE_USER';\nexport const UPDATE_USER = 'UPDATE_USER';\n\nexport interface User {\n  username?: string;\n  password?: string;\n  description?: string;\n}\n\nexport interface UserState {\n  user?: Partial<User> | null;\n  isAuthorized: boolean;\n  error?: string | null;\n}\n\nexport interface AddUser {\n  type: typeof ADD_USER;\n  payload: User;\n}\n\ninterface AddUserSuccess {\n  type: typeof ADD_USER_SUCCESS;\n  payload: User;\n}\n\ninterface AddUserFailure {\n  type: typeof ADD_USER_FAILURE;\n  payload: string;\n}\n\nexport interface SignInUser {\n  type: typeof SIGN_IN_USER;\n  payload: User;\n}\n\ninterface SignInUserSuccess {\n  type: typeof SIGN_IN_USER_SUCCESS;\n  payload: User;\n}\n\ninterface SignInUserFailure {\n  type: typeof SIGN_IN_USER_FAILURE;\n  payload: string;\n}\nexport interface UpdateUser {\n  type: typeof UPDATE_USER;\n  payload: Partial<User>;\n}\n\nexport interface SignOutUser {\n  type: typeof SIGN_OUT_USER;\n}\n\nexport interface DeleteUser {\n  type: typeof DELETE_USER;\n  payload: string;\n}\n\nexport type UserActionTypes =\n  | AddUser\n  | AddUserSuccess\n  | AddUserFailure\n  | SignInUser\n  | SignInUserSuccess\n  | SignInUserFailure\n  | SignOutUser\n  | UpdateUser\n  | DeleteUser;\n","import { UserState } from './types';\n\nexport const USER_REDUCER_KEY = 'userState';\n\nexport const initialState: UserState = {\n  user: null,\n  isAuthorized: false,\n};\n","import {\n  User,\n  SIGN_IN_USER,\n  SIGN_IN_USER_SUCCESS,\n  SIGN_IN_USER_FAILURE,\n  ADD_USER,\n  ADD_USER_SUCCESS,\n  ADD_USER_FAILURE,\n  DELETE_USER,\n  UPDATE_USER,\n  UserActionTypes,\n  SIGN_OUT_USER,\n} from './types';\n\nexport function addUser(user: User): UserActionTypes {\n  return {\n    type: ADD_USER,\n    payload: user,\n  };\n}\n\nexport function addUserSuccess(user: User): UserActionTypes {\n  return {\n    type: ADD_USER_SUCCESS,\n    payload: user,\n  };\n}\n\nexport function addUserFailure(error: string): UserActionTypes {\n  return {\n    type: ADD_USER_FAILURE,\n    payload: error,\n  };\n}\n\nexport function signInUser(user: User): UserActionTypes {\n  return {\n    type: SIGN_IN_USER,\n    payload: user,\n  };\n}\n\nexport function signInUserSuccess(user: User): UserActionTypes {\n  return {\n    type: SIGN_IN_USER_SUCCESS,\n    payload: user,\n  };\n}\n\nexport function signInUserFailure(error: string): UserActionTypes {\n  return {\n    type: SIGN_IN_USER_FAILURE,\n    payload: error,\n  };\n}\n\nexport function signOutUser(): UserActionTypes {\n  return {\n    type: SIGN_OUT_USER,\n  };\n}\n\nexport function updateUser({ username, description }: Partial<User>): UserActionTypes {\n  return {\n    type: UPDATE_USER,\n    payload: { username, description },\n  };\n}\n\nexport function deleteUser(username: string): UserActionTypes {\n  return {\n    type: DELETE_USER,\n    payload: username,\n  };\n}\n","import { find, omit, findIndex } from 'lodash';\nimport md5 from 'md5';\n\nimport { User } from './redux/types';\n\nconst getUsers = () => {\n  const usersStringified = localStorage.getItem('users');\n\n  return usersStringified ? JSON.parse(usersStringified) : [];\n};\n\nconst setUsers = (users: User[]) => {\n  localStorage.setItem('users', JSON.stringify(users));\n};\n\nexport const createUser = (user: User) => {\n  const users = getUsers();\n\n  if (find(users, { username: user.username })) {\n    throw new Error('Already exist');\n  }\n\n  setUsers([...users, { ...user, password: md5(user.password!) }]);\n\n  return omit(user, ['password']);\n};\n\nexport const loginUser = (user: User) => {\n  const users = getUsers();\n  const userInDb = find(users, { username: user.username });\n\n  if (!userInDb) {\n    throw new Error('User does not exist');\n  }\n\n  if (userInDb.password !== md5(user.password!)) {\n    throw new Error('Wrong password');\n  }\n\n  return omit(userInDb, ['password']);\n};\n\nexport const removeUser = (username: string) => {\n  const users = getUsers();\n  const userIndex = findIndex(users, { username });\n\n  setUsers([...users.slice(0, userIndex), ...users.slice(userIndex + 1)]);\n\n  return username;\n};\n\nexport const changeUser = ({ username, description }: User) => {\n  const users = getUsers();\n  const userIndex = findIndex(users, { username });\n\n  setUsers([\n    ...users.slice(0, userIndex),\n    {\n      ...users[userIndex],\n      username,\n      description,\n    },\n    ...users.slice(userIndex + 1),\n  ]);\n\n  return username;\n};\n","import { call, take, delay, takeEvery, all, put } from 'redux-saga/effects';\nimport { push } from 'connected-react-router';\n\nimport {\n  ADD_USER,\n  SIGN_IN_USER,\n  DELETE_USER,\n  UPDATE_USER,\n  User,\n  AddUser,\n  DeleteUser,\n  UpdateUser,\n} from './types';\nimport { addUserSuccess, addUserFailure, signInUserSuccess, signInUserFailure } from './actions';\nimport { createUser, loginUser, removeUser, changeUser } from '../api';\n\nfunction* addUser(action: AddUser) {\n  try {\n    const user: User = yield call(createUser, action.payload);\n    yield put(addUserSuccess(user));\n    yield put(push('/'));\n  } catch (e) {\n    yield put(addUserFailure(e.message));\n  }\n}\n\nfunction* signInUser(action: AddUser) {\n  try {\n    const user: User = yield call(loginUser, action.payload);\n    yield put(signInUserSuccess(user));\n    yield put(push('/'));\n  } catch (e) {\n    yield put(signInUserFailure(e.message));\n    return e;\n  }\n}\n\nfunction* deleteUser(action: DeleteUser) {\n  yield call(removeUser, action.payload);\n}\n\nfunction* updateUser(action: UpdateUser) {\n  yield call(changeUser, action.payload);\n}\n\nfunction* watchCreate() {\n  yield takeEvery(ADD_USER, addUser);\n}\n\nfunction* watchLogin() {\n  let i = 0;\n\n  while (true) {\n    if (i < 3) {\n      const action = yield take(SIGN_IN_USER);\n      const signInResult = yield call(signInUser, action);\n\n      if (signInResult instanceof Error) i++;\n    } else {\n      yield put(signInUserFailure('You are blocked for 1 minute!'));\n      i = yield delay(60000, 0);\n    }\n  }\n}\n\nfunction* watchDelete() {\n  yield takeEvery(DELETE_USER, deleteUser);\n}\n\nfunction* watchUpdate() {\n  yield takeEvery(UPDATE_USER, updateUser);\n}\n\nexport default function* userSaga() {\n  yield all([watchCreate(), watchLogin(), watchDelete(), watchUpdate()]);\n}\n","import { get, flow } from 'lodash/fp';\n\nimport { USER_REDUCER_KEY } from './constants';\n\nconst getStateSlice = get(USER_REDUCER_KEY);\n\nexport const getIsAuthorized = flow(getStateSlice, get('isAuthorized'));\nexport const getUser = flow(getStateSlice, get('user'));\nexport const getError = flow(getStateSlice, get('error'));\n","import { default as reducer } from './reducer';\nimport { USER_REDUCER_KEY } from './constants';\n\nexport { default as userSaga } from './saga';\nexport * from './selectors';\nexport * from './actions';\n\nexport const userReducer = {\n  [USER_REDUCER_KEY]: reducer,\n};\n","import {\n  UserState,\n  UserActionTypes,\n  ADD_USER,\n  ADD_USER_SUCCESS,\n  ADD_USER_FAILURE,\n  SIGN_IN_USER,\n  SIGN_IN_USER_SUCCESS,\n  SIGN_IN_USER_FAILURE,\n  SIGN_OUT_USER,\n  DELETE_USER,\n  UPDATE_USER,\n} from './types';\nimport { initialState } from './constants';\n\nexport default function reducer(\n  state: UserState = initialState,\n  action: UserActionTypes\n): UserState {\n  switch (action.type) {\n    case SIGN_IN_USER:\n    case ADD_USER:\n      return {\n        ...state,\n      };\n    case SIGN_IN_USER_SUCCESS:\n    case ADD_USER_SUCCESS:\n      return {\n        ...state,\n        user: action.payload,\n        isAuthorized: true,\n        error: null,\n      };\n    case SIGN_IN_USER_FAILURE:\n    case ADD_USER_FAILURE:\n      return {\n        ...state,\n        isAuthorized: false,\n        user: null,\n        error: action.payload,\n      };\n    case SIGN_OUT_USER:\n    case DELETE_USER:\n      return {\n        ...state,\n        isAuthorized: false,\n        user: null,\n      };\n    case UPDATE_USER:\n      return {\n        ...state,\n        user: {\n          ...state.user,\n          ...action.payload,\n        },\n      };\n    default:\n      return state;\n  }\n}\n","import { combineReducers } from 'redux';\nimport { History } from 'history';\nimport { connectRouter } from 'connected-react-router';\n\nimport { userReducer } from '../modules/core/redux';\n\nexport default (history: History) =>\n  combineReducers({\n    router: connectRouter(history),\n    ...userReducer,\n  });\n","import { all } from 'redux-saga/effects';\n\nimport { userSaga } from '../modules/core/redux';\n\nexport default function* rootSaga() {\n  yield all([userSaga()]);\n}\n","import { createHashHistory } from 'history';\nimport { applyMiddleware, createStore } from 'redux';\nimport createSagaMiddleware from 'redux-saga';\nimport { composeWithDevTools } from 'redux-devtools-extension';\nimport { routerMiddleware } from 'connected-react-router';\n\nimport creteRootReducer from './reducers';\nimport saga from './sagas';\n\nexport const history = createHashHistory();\n\nconst sagaMiddleware = createSagaMiddleware();\n\nexport default function configureStore(initialState?: any) {\n  const middlewares = [sagaMiddleware, routerMiddleware(history)];\n  const middlewareEnhancer = applyMiddleware(...middlewares);\n  const composedEnhancers = composeWithDevTools(middlewareEnhancer);\n  const rootReducer = creteRootReducer(history);\n  const store = createStore(rootReducer, initialState, composedEnhancers);\n\n  sagaMiddleware.run(saga);\n\n  if (process.env.NODE_ENV !== 'production' && module.hot) {\n    module.hot.accept('./reducers', () => store.replaceReducer(rootReducer));\n  }\n\n  return store;\n}\n","import React, { Fragment, ReactNode, FC } from 'react';\nimport { createStyles, makeStyles } from '@material-ui/core/styles';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Container from '@material-ui/core/Container';\n\nconst useStyles = makeStyles(() =>\n  createStyles({\n    container: {\n      flexGrow: 1,\n      overflow: 'auto',\n    },\n  })\n);\n\ninterface Props {\n  children: ReactNode;\n}\n\nconst Layout: FC<Props> = ({ children }) => {\n  const classes = useStyles();\n\n  return (\n    <Fragment>\n      <CssBaseline />\n      <div className={classes.container}>\n        <Container maxWidth=\"md\">{children}</Container>\n      </div>\n    </Fragment>\n  );\n};\n\nexport default Layout;\n","import React, { FC, ReactNode } from 'react';\nimport MUILink from '@material-ui/core/Link';\nimport { Link as RouterLink } from 'react-router-dom';\n\ninterface Props {\n  to: string;\n  children: ReactNode;\n  className?: string;\n}\n\nconst Link: FC<Props> = ({ to, children, className }) => {\n  return (\n    <MUILink component={RouterLink} to={to} className={className}>\n      {children}\n    </MUILink>\n  );\n};\n\nexport default Link;\n","import React, { FC, ReactNode } from 'react';\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\n\nimport Link from './Link';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      flexShrink: 0,\n    },\n    menuButton: {\n      marginRight: theme.spacing(2),\n    },\n    title: {\n      flexGrow: 1,\n    },\n    link: {\n      color: theme.palette.background.default,\n    },\n  })\n);\n\ninterface Props {\n  title: ReactNode;\n  isAuthorized: boolean;\n  onLogout: () => void;\n}\n\nconst AppTopBar: FC<Props> = ({ title, isAuthorized, onLogout }) => {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.root}>\n      <AppBar position=\"static\">\n        <Toolbar>\n          <Typography variant=\"h6\" className={classes.title}>\n            <Link to=\"/\" className={classes.link}>\n              {title}\n            </Link>\n          </Typography>\n          {isAuthorized ? (\n            <Button color=\"inherit\" onClick={onLogout}>\n              Logout\n            </Button>\n          ) : (\n            <>\n              <Button color=\"inherit\">\n                <Link to=\"/registration\" className={classes.link}>\n                  Register\n                </Link>\n              </Button>\n              <Button color=\"inherit\">\n                <Link to=\"/login\" className={classes.link}>\n                  Login\n                </Link>\n              </Button>\n            </>\n          )}\n        </Toolbar>\n      </AppBar>\n    </div>\n  );\n};\n\nexport default AppTopBar;\n","import React, { FC } from 'react';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { createStyles, makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(() =>\n  createStyles({\n    root: {\n      height: '100%',\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center',\n    },\n  })\n);\n\nconst Spinner: FC = () => {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.root}>\n      <CircularProgress />\n    </div>\n  );\n};\n\nexport default Spinner;\n","import React, { FC, ReactNode } from 'react';\nimport { useFormik } from 'formik';\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport TextField from '@material-ui/core/TextField';\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\n\nimport { User } from '../redux/types';\n\nconst useStyles = makeStyles(theme => ({\n  paper: {\n    marginTop: theme.spacing(8),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: theme.palette.secondary.light,\n  },\n  form: {\n    width: '100%',\n    marginTop: theme.spacing(1),\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2),\n  },\n  errorMessage: {\n    color: theme.palette.error.main,\n  }\n}));\n\ninterface Props {\n  title: string;\n  buttonLabel: string;\n  error?: string;\n  icon?: ReactNode;\n  validationSchema: any;\n  onSubmit: (user: User) => void;\n}\n\nconst Form: FC<Props> = ({ title, buttonLabel, onSubmit, validationSchema, error, icon }) => {\n  const classes = useStyles();\n  const formik = useFormik({\n    initialValues: {\n      username: '',\n      password: '',\n    },\n    validationSchema,\n    onSubmit,\n  });\n\n  return (\n    <Container component=\"main\" maxWidth=\"xs\">\n      <CssBaseline />\n      <div className={classes.paper}>\n        <Avatar className={classes.avatar}>{icon ? icon : <LockOutlinedIcon />}</Avatar>\n        <Typography component=\"h1\" variant=\"h5\">\n          {title}\n        </Typography>\n        <form className={classes.form} noValidate onSubmit={formik.handleSubmit}>\n          <TextField\n            variant=\"outlined\"\n            margin=\"normal\"\n            required\n            fullWidth\n            id=\"username\"\n            name=\"username\"\n            label=\"Username\"\n            error={!!formik.errors.username}\n            helperText={formik.errors.username}\n            autoComplete=\"username\"\n            onChange={formik.handleChange}\n            value={formik.values.username}\n            autoFocus\n          />\n          <TextField\n            variant=\"outlined\"\n            margin=\"normal\"\n            required\n            fullWidth\n            id=\"password\"\n            type=\"password\"\n            name=\"password\"\n            label=\"Password\"\n            error={!!formik.errors.password}\n            helperText={formik.errors.password}\n            onChange={formik.handleChange}\n            value={formik.values.password}\n            autoComplete=\"current-password\"\n          />\n          {error && <div className={classes.errorMessage}>{error}</div>}\n          <Button\n            type=\"submit\"\n            fullWidth\n            variant=\"contained\"\n            color=\"primary\"\n            className={classes.submit}\n          >\n            {buttonLabel}\n          </Button>\n        </form>\n      </div>\n    </Container>\n  );\n};\n\nexport default Form;\n","import React, { FC, ReactNode, useCallback } from 'react';\nimport { useSelector } from 'react-redux';\nimport { Route, Redirect } from 'react-router-dom';\n\nimport { getIsAuthorized } from '../redux';\n\ninterface Props {\n  children: ReactNode;\n  path: string;\n}\n\nconst PrivateRoute: FC<Props> = ({ children, ...rest }) => {\n  const isAuthorized = useSelector(getIsAuthorized);\n  const render = useCallback(\n    ({ location }) =>\n      isAuthorized ? (\n        children\n      ) : (\n        <Redirect\n          to={{\n            pathname: '/login',\n            state: { from: location },\n          }}\n        />\n      ),\n    [children, isAuthorized]\n  );\n  return <Route {...rest} render={render} />;\n};\n\nexport default PrivateRoute;\n","import React, { FC, useCallback } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport PersonAddIcon from '@material-ui/icons/PersonAdd';\nimport * as Yup from 'yup';\n\nimport { Form } from '../../core';\nimport { addUser, getError } from '../../core/redux';\nimport { User } from '../../core/redux/types';\n\nexport const RegistrationSchema = Yup.object().shape({\n  username: Yup.string()\n    .min(2, 'Too Short!')\n    .max(50, 'Too Long!')\n    .required('Required'),\n  password: Yup.string()\n    .required('No password provided.')\n    .min(8, 'Password is too short - should be 8 chars minimum.')\n    .matches(/\\S/, 'Password can only contain non whitespace character.'),\n});\n\nconst RegistrationForm: FC = () => {\n  const dispatch = useDispatch();\n  const error = useSelector(getError);\n\n  const handleSubmit = useCallback(\n    (user: User) => {\n      dispatch(addUser(user));\n    },\n    [dispatch]\n  );\n\n  return (\n    <Form\n      icon={<PersonAddIcon />}\n      title=\"Registration\"\n      buttonLabel=\"Register\"\n      onSubmit={handleSubmit}\n      validationSchema={RegistrationSchema}\n      error={error}\n    />\n  );\n};\n\nexport default RegistrationForm;\n","import React, { FC, useCallback } from 'react';\nimport * as Yup from 'yup';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { Form } from '../../core';\nimport { signInUser, getError } from '../../core/redux';\nimport { User } from '../../core/redux/types';\n\nexport const SignUpSchema = Yup.object().shape({\n  username: Yup.string()\n    .min(2, 'Too Short!')\n    .max(50, 'Too Long!')\n    .required('Required'),\n  password: Yup.string().required('No password provided.'),\n});\n\nconst LoginForm: FC = () => {\n  const dispatch = useDispatch();\n  const error = useSelector(getError);\n\n  const handleSubmit = useCallback(\n    (user: User) => {\n      dispatch(signInUser(user));\n    },\n    [dispatch]\n  );\n\n  return (\n    <Form\n      title=\"Sign In\"\n      buttonLabel=\"Login\"\n      onSubmit={handleSubmit}\n      error={error}\n      validationSchema={SignUpSchema}\n    />\n  );\n};\n\nexport default LoginForm;\n","import React, { FC, useCallback, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { createStyles, makeStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Typography from '@material-ui/core/Typography';\nimport CssBaseline from '@material-ui/core/CssBaseline';\n\nimport { getUser, deleteUser, updateUser } from '../../core/redux';\n\nconst useStyles = makeStyles(theme =>\n  createStyles({\n    container: {\n      marginTop: theme.spacing(8),\n    },\n    field: {\n      marginTop: theme.spacing(2),\n    },\n    buttonContainer: {\n      display: 'flex',\n      justifyContent: 'space-evenly',\n      marginTop: theme.spacing(2),\n    },\n  })\n);\n\nconst Profile: FC = () => {\n  const dispatch = useDispatch();\n  const user = useSelector(getUser);\n  const [description, setDescription] = useState(user.description);\n\n  const classes = useStyles();\n  const handleSubmit = useCallback(\n    e => {\n      e.preventDefault();\n      dispatch(\n        updateUser({\n          ...user,\n          description,\n        })\n      );\n    },\n    [dispatch, user, description]\n  );\n  const handleChangeDesc = useCallback(e => {\n    setDescription(e.target.value);\n  }, []);\n\n  const handleDelete = useCallback(() => {\n    dispatch(deleteUser(user.username));\n  }, [user, dispatch]);\n\n  return (\n    <div className={classes.container}>\n      <CssBaseline />\n      <Typography variant=\"h4\">{user.username}</Typography>\n      <form onSubmit={handleSubmit}>\n        <TextField\n          className={classes.field}\n          label=\"Description\"\n          id=\"description\"\n          fullWidth\n          multiline\n          autoFocus\n          onChange={handleChangeDesc}\n          value={description}\n        />\n        <div className={classes.buttonContainer}>\n          <Button type=\"button\" variant=\"contained\" color=\"secondary\" onClick={handleDelete}>\n            Delete Profile\n          </Button>\n          <Button type=\"submit\" variant=\"contained\" color=\"primary\">\n            Update Profile\n          </Button>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default Profile;\n","import React, { FC, useCallback } from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport { ConnectedRouter } from 'connected-react-router';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { Layout, PrivateRoute, AppBar } from './modules/core';\nimport { RegistrationForm } from './modules/registration';\nimport { LoginForm } from './modules/login';\nimport { Profile } from './modules/profile';\nimport { history } from './store';\nimport { getIsAuthorized, signOutUser } from './modules/core/redux';\n\ninterface Props {\n  appName: string;\n}\n\nconst App: FC<Props> = ({ appName }) => {\n  const dispatch = useDispatch();\n  const isAuthorized = useSelector(getIsAuthorized);\n\n  const handleLogout = useCallback(() => {\n    dispatch(signOutUser());\n  }, [dispatch]);\n\n  return (\n    <ConnectedRouter history={history}>\n      <AppBar title={appName} isAuthorized={isAuthorized} onLogout={handleLogout} />\n      <Layout>\n        <Switch>\n          <Route path=\"/registration\">\n            <RegistrationForm />\n          </Route>\n          <Route path=\"/login\">\n            <LoginForm />\n          </Route>\n          <PrivateRoute path=\"/\">\n            <Profile />\n          </PrivateRoute>\n        </Switch>\n      </Layout>\n    </ConnectedRouter>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './index.css';\nimport { Provider } from 'react-redux';\nimport configureStore from './store';\n\nimport App from './App';\n\nconst store = configureStore();\n\nReactDOM.render(\n  <Provider store={store}>\n    <App appName=\"Test App\" />\n  </Provider>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}